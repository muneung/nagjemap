<h1>í”„ë™ì²˜ ë¬¸</h1>

<div class="map-info">
    ğŸ’¡ ê¸°ëŠ¥ í…ŒìŠ¤íŠ¸ì¤‘
</div>

<div class="map-section">
    <h3>ì‹œì–´í•˜íŠ¸ ì§€ë„</h3>

    <div class="map-section-inner">
        <div class="map-container" id="mapContainer">
            <img src="./images/map1.png" alt="ì‹œì–´í•˜íŠ¸ ì§€ë„" class="map-image" id="mapImage">
        </div>
    </div>
</div>

<script>
    // íŒŒì¼ êµ¬ì¡° ë³€ë™ìœ¼ë¡œ ì‚¬ìš©í•˜ê¸° ìœ„í•´ì„œëŠ” index í•˜ë‹¨ì— ë³µë¶™í•˜ê±°ë‚˜ js íŒŒì¼ ë§Œë“¤ì–´ì„œ ì—°ë™ í•„ìš” //
    // ì°¸ì¡°: hotspot ì°¸ì¡° js ë‹¨ìœ„ í•„ìš”ë¡œ(ì—­ëŸ‰ë¶€ì¡±) ì„ì‹œë¡œ htmlì— ìŒ©ìœ¼ë¡œ ë¶™ì—¬ë„£ìŒ //
    function initializeMenu() {
        const menuToggle = document.getElementById('menu-toggle');
        const menu = document.getElementById('menu');

        if (!menu || !menuToggle) return;

        // ë©”ë‰´ í† ê¸€ í•¨ìˆ˜
        function toggleMenu() {
            menu.classList.toggle('visible');
            menu.classList.toggle('hidden');
        }

        // ë²„íŠ¼ í´ë¦­ ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ ì—°ê²°
        menuToggle.addEventListener('click', toggleMenu);

        // í™”ë©´ í¬ê¸°ë¥¼ ê°ì§€í•˜ì—¬ ë©”ë‰´ ìƒíƒœë¥¼ ì„¤ì •í•˜ëŠ” í•¨ìˆ˜
        function checkViewport() {
            // ëª¨ë°”ì¼ ê¸°ì¤€ í­ 768px
            const isMobile = window.innerWidth <= 768;

            if (isMobile) {
                // ëª¨ë°”ì¼ ìƒíƒœ: ë©”ë‰´ë¥¼ fixedë¡œ ê³ ì •í•˜ê³  ìˆ¨ê¹€ ìƒíƒœë¡œ ì‹œì‘í•˜ë„ë¡ í´ë˜ìŠ¤ ì„¤ì •
                menu.style.position = 'fixed';
                menu.style.height = '100vh';

                // ë§Œì•½ visible ë˜ëŠ” hidden í´ë˜ìŠ¤ê°€ ì„¤ì •ë˜ì–´ ìˆì§€ ì•Šë‹¤ë©´ hiddenìœ¼ë¡œ ì‹œì‘
                if (!menu.classList.contains('visible') && !menu.classList.contains('hidden')) {
                    menu.classList.add('hidden');
                }
            } else {
                // ë°ìŠ¤í¬í†± ìƒíƒœ: ë©”ë‰´ë¥¼ í•­ìƒ ë³´ì´ê²Œ í•¨
                menu.style.transform = 'none';
                menu.classList.remove('hidden', 'visible');
                menu.style.position = 'initial';
                menu.style.height = 'auto';
            }
        }

        // í˜ì´ì§€ ë¡œë“œ ì‹œ ë° í™”ë©´ í¬ê¸° ë³€ê²½ ì‹œ í•¨ìˆ˜ ì‹¤í–‰
        window.addEventListener('load', checkViewport);
        window.addEventListener('resize', checkViewport);

        // load ì´ë²¤íŠ¸ ì´ì „ì— ìŠ¤í¬ë¦½íŠ¸ê°€ ì‹¤í–‰ë  ê²½ìš°ë¥¼ ëŒ€ë¹„í•´ í•œ ë²ˆ ì¦‰ì‹œ ì‹¤í–‰
        checkViewport();
    }

    // DOM ì½˜í…ì¸ ê°€ ëª¨ë‘ ë¡œë“œëœ í›„ initializeMenu í•¨ìˆ˜ ì‹¤í–‰
    document.addEventListener('DOMContentLoaded', initializeMenu);

    // ë‚œ ì°¸ì¡°ë¬¸ê°™ì€ê±° ì•ˆ ì ëŠ” ì”¹ìƒì—¬ìì„
    const hotspots = [
        // ì™¼ìª½ ì§€ì—­
        { name: 'centerpin', x: 50, y: 50, url: 'loca_example.html' },
    ];

    document.addEventListener('DOMContentLoaded', () => {
        const container = document.getElementById('mapContainer');
        const mapImage = document.getElementById('mapImage');
        let createdHotspots = [];

        function createHotspotElements() {

            createdHotspots.forEach(h => h.el.remove());
            createdHotspots = [];

            hotspots.forEach(spot => {
                const el = document.createElement('div');
                el.className = 'hotspot';

                el.dataset.x = spot.x;
                el.dataset.y = spot.y;
                el.dataset.url = spot.url || '';

                const label = document.createElement('div');
                label.className = 'hotspot-label';
                label.textContent = spot.name || '';
                el.appendChild(label);

                el.addEventListener('click', (e) => {
                    const url = el.dataset.url;
                    if (url) window.location.href = url;
                });

                container.appendChild(el);
                createdHotspots.push({ spot, el });
            });
        }

        function positionHotspots() {
            const imgRect = mapImage.getBoundingClientRect();
            const containerRect = container.getBoundingClientRect();

            if (imgRect.width === 0 || imgRect.height === 0) return;

            createdHotspots.forEach(item => {
                const el = item.el;
                const pctX = parseFloat(el.dataset.x); // 0~100
                const pctY = parseFloat(el.dataset.y);

                const px = (pctX / 100) * mapImage.clientWidth;
                const py = (pctY / 100) * mapImage.clientHeight;

                el.style.left = px + 'px';
                el.style.top = py + 'px';

            });
        }

        let resizeTimeout = null;
        function scheduleReposition() {
            if (resizeTimeout) clearTimeout(resizeTimeout);
            resizeTimeout = setTimeout(positionHotspots, 50);
        }

        function init() {
            createHotspotElements();
            positionHotspots();
        }

        if (mapImage.complete) {
            init();
        } else {
            mapImage.addEventListener('load', init);
        }

        window.addEventListener('resize', scheduleReposition);
        window.addEventListener('orientationchange', scheduleReposition);
        window.addEventListener('scroll', scheduleReposition);
    });
</script>